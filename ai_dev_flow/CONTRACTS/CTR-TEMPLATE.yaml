# Contract ID: Must match filename (CTR-XXX_name)
contract_id: template_contract
contract_version: "1.0.0"
service_type: [agent|mcp|infra|shared]

# Traceability
upstream_requirements:
  - REQ-NNN
upstream_adrs:
  - ADR-NNN

# Interface Definitions
endpoints:
  - name: function_name
    description: "What this endpoint does"
    synchronous: true  # true for sync, false for async

    request_schema:
      type: object
      required: [field1, field2]
      properties:
        field1:
          type: string
          description: "Purpose of field1"
          example: "sample_value"
        field2:
          type: integer
          minimum: 0
          description: "Purpose of field2"
          example: 42

    response_schema:
      type: object
      required: [status, result]
      properties:
        status:
          type: string
          enum: [success, error]
          description: "Operation outcome"
        result:
          type: object
          description: "Response payload when status=success"
        error_code:
          type: string
          description: "Error identifier when status=error"
        error_message:
          type: string
          description: "Human-readable error description when status=error"

    error_codes:
      - code: INVALID_INPUT
        http_status: 400
        description: "Invalid request parameters"
        retry_safe: false
      - code: RESOURCE_NOT_FOUND
        http_status: 404
        description: "Requested resource does not exist"
        retry_safe: false
      - code: RATE_LIMITED
        http_status: 429
        description: "Too many requests"
        retry_safe: true
      - code: INTERNAL_ERROR
        http_status: 500
        description: "Internal processing error"
        retry_safe: true

# Non-Functional Requirements
non_functional:
  max_latency_ms: 100
  min_throughput_rps: 1000
  idempotent: true
  retry_strategy: exponential_backoff
  max_retries: 3
  timeout_ms: 5000
  circuit_breaker:
    failure_threshold: 5
    timeout_seconds: 60
    half_open_max_calls: 3

# Versioning
versioning:
  breaking_changes: false
  backward_compatible: true
  deprecation_date: null
  migration_guide_url: null

# Security
security:
  authentication_required: true
  authentication_method: [api_key|oauth|mtls]
  authorization_required: true
  rate_limiting:
    requests_per_second: 100
    burst_size: 150
  encryption:
    in_transit: tls_1_3
    at_rest: false
