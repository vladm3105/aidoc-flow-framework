openapi: 3.0.3
info:
  title: "[SERVICE_NAME] API"
  description: |
    API contract for [SERVICE_NAME - e.g., User Service, Payment Gateway].

    This is an example OpenAPI specification template. Replace all [PLACEHOLDERS]
    with your service-specific values.

    **Authentication**: Bearer Token (JWT)
    **Base URL**: https://api.example.com/api/v1

  version: 1.0.0
  contact:
    name: "[TEAM_NAME]"
    email: "[TEAM_EMAIL]"
    url: "[DOCUMENTATION_URL]"
  license:
    name: "[LICENSE - e.g., MIT, Apache 2.0, Proprietary]"

servers:
  - url: https://api.example.com/api/v1
    description: Production
  - url: https://staging-api.example.com/api/v1
    description: Staging
  - url: http://localhost:8080/api/v1
    description: Local development

tags:
  - name: "[RESOURCE_TAG - e.g., Users]"
    description: "[DESCRIPTION - e.g., User management operations]"
  - name: "[ADMIN_TAG - e.g., Admin]"
    description: "[DESCRIPTION - e.g., Administrative operations]"

security:
  - BearerAuth: []

paths:
  /[RESOURCE]:
    post:
      tags:
        - "[RESOURCE_TAG]"
      summary: "Create [RESOURCE]"
      description: "Creates a new [RESOURCE] with the provided data"
      operationId: "create[RESOURCE]"

      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/[RESOURCE]CreateRequest'
            examples:
              basic:
                summary: "Basic [RESOURCE] creation"
                value:
                  name: "Example Name"
                  email: "user@example.com"
                  age: 30

      responses:
        '201':
          description: "[RESOURCE] created successfully"
          headers:
            Location:
              description: "URL of the created resource"
              schema:
                type: string
                example: "/api/v1/[RESOURCE]/123e4567-e89b-12d3-a456-426614174000"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/[RESOURCE]'

        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /[RESOURCE]/{id}:
    get:
      tags:
        - "[RESOURCE_TAG]"
      summary: "Get [RESOURCE] by ID"
      description: "Retrieves a single [RESOURCE] by its unique identifier"
      operationId: "get[RESOURCE]ById"

      parameters:
        - $ref: '#/components/parameters/ResourceId'

      responses:
        '200':
          description: "[RESOURCE] found"
          headers:
            ETag:
              description: "Entity tag for caching"
              schema:
                type: string
            Cache-Control:
              description: "Caching policy"
              schema:
                type: string
                example: "private, max-age=300"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/[RESOURCE]'

        '304':
          description: "Not modified (ETag match)"
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - "[RESOURCE_TAG]"
      summary: "Update [RESOURCE]"
      description: "Updates an existing [RESOURCE]. Partial updates supported."
      operationId: "update[RESOURCE]"

      parameters:
        - $ref: '#/components/parameters/ResourceId'
        - name: If-Match
          in: header
          description: "ETag for optimistic locking"
          schema:
            type: string

      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/[RESOURCE]UpdateRequest'

      responses:
        '200':
          description: "[RESOURCE] updated successfully"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/[RESOURCE]'

        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '412':
          description: "Precondition failed (ETag mismatch)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      tags:
        - "[RESOURCE_TAG]"
      summary: "Delete [RESOURCE]"
      description: "Soft-deletes a [RESOURCE] (marks as deleted)"
      operationId: "delete[RESOURCE]"

      parameters:
        - $ref: '#/components/parameters/ResourceId'

      responses:
        '204':
          description: "[RESOURCE] deleted successfully"
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /[RESOURCE]/search:
    post:
      tags:
        - "[RESOURCE_TAG]"
      summary: "Search [RESOURCE]"
      description: "Searches for [RESOURCE] matching criteria"
      operationId: "search[RESOURCE]"

      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchRequest'

      responses:
        '200':
          description: "Search results"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResponse'

        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "JWT token obtained from /auth/login"

  parameters:
    ResourceId:
      name: id
      in: path
      required: true
      description: "Unique identifier of the [RESOURCE]"
      schema:
        type: string
        format: uuid
        example: "123e4567-e89b-12d3-a456-426614174000"

  schemas:
    [RESOURCE]:
      type: object
      required:
        - id
        - "[FIELD_1]"
        - created_at
        - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: "Unique identifier"
          example: "123e4567-e89b-12d3-a456-426614174000"

        "[FIELD_1]":
          type: string
          description: "[DESCRIPTION]"
          minLength: 1
          maxLength: 255
          example: "[EXAMPLE_VALUE]"

        "[FIELD_2]":
          type: integer
          description: "[DESCRIPTION]"
          minimum: 0
          maximum: 120
          example: 30

        "[FIELD_3]":
          type: object
          description: "[DESCRIPTION - e.g., Nested address object]"
          properties:
            "[SUB_FIELD_1]":
              type: string
              example: "[VALUE]"
            "[SUB_FIELD_2]":
              type: string
              example: "[VALUE]"

        "[FIELD_4]":
          type: array
          description: "[DESCRIPTION - e.g., Tags array]"
          items:
            type: string
          example: ["tag1", "tag2"]

        created_at:
          type: string
          format: date-time
          description: "Creation timestamp"
          example: "2024-01-15T10:30:00Z"

        updated_at:
          type: string
          format: date-time
          description: "Last update timestamp"
          example: "2024-01-15T10:30:00Z"

        created_by:
          type: string
          description: "User ID who created this resource"
          example: "user-123"

        updated_by:
          type: string
          description: "User ID who last updated this resource"
          example: "user-456"

        version:
          type: integer
          description: "Optimistic locking version"
          example: 1

        deleted_at:
          type: string
          format: date-time
          description: "Soft delete timestamp (null if not deleted)"
          nullable: true
          example: null

    [RESOURCE]CreateRequest:
      type: object
      required:
        - "[FIELD_1]"
      properties:
        "[FIELD_1]":
          type: string
          minLength: 1
          maxLength: 255
        "[FIELD_2]":
          type: integer
          minimum: 0
        "[FIELD_3]":
          type: object
          properties:
            "[SUB_FIELD_1]":
              type: string
            "[SUB_FIELD_2]":
              type: string

    [RESOURCE]UpdateRequest:
      type: object
      description: "All fields optional for partial updates"
      properties:
        "[FIELD_1]":
          type: string
          minLength: 1
          maxLength: 255
        "[FIELD_2]":
          type: integer
          minimum: 0

    SearchRequest:
      type: object
      properties:
        filters:
          type: object
          description: "Field filters"
          additionalProperties:
            type: object
            properties:
              operator:
                type: string
                enum: [eq, ne, gt, lt, gte, lte, in, like, between]
              value:
                oneOf:
                  - type: string
                  - type: number
                  - type: array

        sort:
          type: array
          description: "Sort criteria"
          items:
            type: object
            required:
              - field
              - order
            properties:
              field:
                type: string
              order:
                type: string
                enum: [asc, desc]

        pagination:
          type: object
          properties:
            page:
              type: integer
              minimum: 1
              default: 1
            page_size:
              type: integer
              minimum: 1
              maximum: 100
              default: 20

    SearchResponse:
      type: object
      required:
        - results
        - pagination
      properties:
        results:
          type: array
          items:
            $ref: '#/components/schemas/[RESOURCE]'

        pagination:
          type: object
          required:
            - total_count
            - page
            - page_size
            - total_pages
          properties:
            total_count:
              type: integer
              example: 150
            page:
              type: integer
              example: 1
            page_size:
              type: integer
              example: 20
            total_pages:
              type: integer
              example: 8

        links:
          type: object
          properties:
            self:
              type: string
              format: uri
            next:
              type: string
              format: uri
              nullable: true
            prev:
              type: string
              format: uri
              nullable: true
            first:
              type: string
              format: uri
            last:
              type: string
              format: uri

    ErrorResponse:
      type: object
      required:
        - error
        - request_id
        - timestamp
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: "Machine-readable error code"
              example: "VALIDATION_ERROR"
            message:
              type: string
              description: "Human-readable error message"
              example: "Request validation failed"
            details:
              type: array
              description: "Detailed validation errors"
              items:
                type: object
                properties:
                  field:
                    type: string
                    example: "[FIELD_PATH]"
                  error:
                    type: string
                    example: "[ERROR_MESSAGE]"
                  expected:
                    type: string
                    example: "[EXPECTED_FORMAT]"

        request_id:
          type: string
          format: uuid
          description: "Correlation ID for tracing"
          example: "req-123e4567-e89b-12d3-a456-426614174000"

        timestamp:
          type: string
          format: date-time
          description: "Error timestamp"
          example: "2024-01-15T10:30:00Z"

  responses:
    BadRequest:
      description: "Bad Request - Validation error or malformed JSON"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "VALIDATION_ERROR"
              message: "Request validation failed"
              details:
                - field: "[FIELD_NAME]"
                  error: "Field is required"
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

    Unauthorized:
      description: "Unauthorized - Authentication required or failed"
      headers:
        WWW-Authenticate:
          schema:
            type: string
            example: 'Bearer realm="api", error="invalid_token"'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "TOKEN_EXPIRED"
              message: "JWT token has expired"
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

    Forbidden:
      description: "Forbidden - Insufficient permissions"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "INSUFFICIENT_PERMISSIONS"
              message: "User lacks required permissions"
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

    NotFound:
      description: "Not Found - Resource doesn't exist"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "RESOURCE_NOT_FOUND"
              message: "[RESOURCE] with ID 'xyz' not found"
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

    Conflict:
      description: "Conflict - Resource already exists or version conflict"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "RESOURCE_EXISTS"
              message: "[RESOURCE] with email 'user@example.com' already exists"
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

    UnprocessableEntity:
      description: "Unprocessable Entity - Business rule violation"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "BUSINESS_RULE_VIOLATION"
              message: "Operation violates business rules"
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

    TooManyRequests:
      description: "Too Many Requests - Rate limit exceeded"
      headers:
        X-RateLimit-Limit:
          schema:
            type: integer
            example: 100
        X-RateLimit-Remaining:
          schema:
            type: integer
            example: 0
        X-RateLimit-Reset:
          schema:
            type: integer
            example: 1234567890
        Retry-After:
          schema:
            type: integer
            example: 60
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "RATE_LIMIT_EXCEEDED"
              message: "Too many requests. Retry after 60 seconds."
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

    InternalServerError:
      description: "Internal Server Error - Unexpected server error"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: "INTERNAL_ERROR"
              message: "An unexpected error occurred"
            request_id: "req-123"
            timestamp: "2024-01-15T10:30:00Z"

# Example Usage: Replace all [PLACEHOLDERS] with your service-specific values
